<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revenue Analytics - KiotViet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css}">
    <link rel="stylesheet" href="/css/header-nav.css" th:href="@{/css/header-nav.css}">
    <link rel="stylesheet" href="/css/dashboard-revenue.css" th:href="@{/css/dashboard-revenue.css}">
    <link rel="stylesheet" href="/css/dashboard-revenue-enhanced.css" th:href="@{/css/dashboard-revenue-enhanced.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header Component -->
    <div th:replace="~{common/header :: dashboardHeader}"></div>

    <!-- Navigation Component -->
    <div th:replace="~{common/navigation :: dashboardNav('revenue')}"></div>

    <!-- Revenue Dashboard Content -->
    <main class="dashboard-content">
        <!-- Page Header -->
        <section class="page-header">
            <div class="header-content">
                <div class="header-text">
                    <h1>Revenue Analytics</h1>
                    <p>Comprehensive insights into your business performance and financial metrics</p>
                </div>
                <div class="header-actions">
                    <button id="refreshData" class="btn btn-outline">
                        <i class="fas fa-sync-alt"></i>
                        <span>Refresh</span>
                    </button>
                    <button id="exportReport" class="btn btn-primary">
                        <i class="fas fa-download"></i>
                        <span>Export Report</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Date Range Section -->
        <section class="date-range-section">
            <div class="date-range-content">
                <h2>Analytics Period</h2>
                <div class="date-range-controls">
                    <select id="periodSelector" class="period-select">
                        <option value="today">Today</option>
                        <option value="thisWeek" selected>This Week</option>
                        <option value="thisMonth">This Month</option>
                        <option value="thisQuarter">This Quarter</option>
                        <option value="thisYear">This Year</option>
                    </select>
                    <div class="date-inputs">
                        <input type="date" id="startDate" class="date-input">
                        <span class="date-separator">to</span>
                        <input type="date" id="endDate" class="date-input">
                    </div>
                </div>
            </div>
        </section>

        <!-- Revenue Overview Cards -->
        <section class="revenue-overview-section">
            <div class="revenue-overview-grid">
                <!-- Total Revenue Card -->
                <div class="revenue-card primary">
                    <div class="revenue-card-header">
                        <h3>Total Revenue</h3>
                        <div class="revenue-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                    <div class="revenue-card-body">
                        <div class="revenue-amount" id="revenueAmount">₫0</div>
                        <div class="revenue-period" id="revenuePeriod">This Week</div>
                        <div class="revenue-growth">
                            <i id="growthIcon" class="fas fa-arrow-up growth-icon positive"></i>
                            <span id="growthPercentage" class="growth-value positive">+0%</span>
                        </div>
                    </div>
                </div>

                <!-- Total Orders Card -->
                <div class="revenue-card secondary">
                    <div class="revenue-card-header">
                        <h3>Total Orders</h3>
                        <div class="revenue-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="revenue-card-body">
                        <div class="revenue-stat" id="ordersCount">0</div>
                        <div class="revenue-period" id="ordersPeriod">This Week</div>
                        <div class="revenue-comparison">
                            <span class="revenue-value">0</span> orders
                        </div>
                    </div>
                </div>

                <!-- Customers Card -->
                <div class="revenue-card success">
                    <div class="revenue-card-header">
                        <h3>Unique Customers</h3>
                        <div class="revenue-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    <div class="revenue-card-body">
                        <div class="revenue-stat" id="customersCount">0</div>
                        <div class="revenue-period" id="customersPeriod">This Week</div>
                        <div class="revenue-comparison">
                            <span class="revenue-value">0</span> customers
                        </div>
                    </div>
                </div>

                <!-- Average Order Value Card -->
                <div class="revenue-card warning">
                    <div class="revenue-card-header">
                        <h3>Average Order Value</h3>
                        <div class="revenue-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                    </div>
                    <div class="revenue-card-body">
                        <div class="revenue-amount" id="averageOrderValue">₫0</div>
                        <div class="revenue-period" id="aovPeriod">This Week</div>
                        <div class="revenue-growth">
                            <i class="fas fa-arrow-up growth-icon positive"></i>
                            <span class="growth-value positive">+0%</span>
                        </div>
                    </div>
                </div>

                <!-- Items Sold Card -->
                <div class="revenue-card info">
                    <div class="revenue-card-header">
                        <h3>Items Sold</h3>
                        <div class="revenue-icon">
                            <i class="fas fa-box"></i>
                        </div>
                    </div>
                    <div class="revenue-card-body">
                        <div class="revenue-stat" id="itemsSold">0</div>
                        <div class="revenue-period" id="itemsPeriod">This Week</div>
                        <div class="revenue-comparison">
                            <span class="revenue-value">0</span> items
                        </div>
                    </div>
                </div>

                <!-- Conversion Rate Card -->
                <div class="revenue-card purple">
                    <div class="revenue-card-header">
                        <h3>Conversion Rate</h3>
                        <div class="revenue-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                    </div>
                    <div class="revenue-card-body">
                        <div class="revenue-stat" id="conversionRate">0%</div>
                        <div class="revenue-period" id="conversionPeriod">This Week</div>
                        <div class="revenue-growth">
                            <i class="fas fa-arrow-up growth-icon positive"></i>
                            <span class="growth-value positive">+0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Growth Metrics -->
        <section class="growth-metrics-section">
            <div class="metrics-cards">
                <div class="metric-card">
                    <div class="metric-header">
                        <h4>Daily Growth</h4>
                        <i class="fas fa-chart-day"></i>
                    </div>
                    <div class="metric-value" id="dailyGrowth">+0%</div>
                    <div class="metric-description">Compared to yesterday</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <h4>Weekly Growth</h4>
                        <i class="fas fa-chart-week"></i>
                    </div>
                    <div class="metric-value" id="weeklyGrowth">+0%</div>
                    <div class="metric-description">Compared to last week</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <h4>Monthly Growth</h4>
                        <i class="fas fa-chart-month"></i>
                    </div>
                    <div class="metric-value" id="monthlyGrowth">+0%</div>
                    <div class="metric-description">Compared to last month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-header">
                        <h4>Yearly Growth</h4>
                        <i class="fas fa-chart-year"></i>
                    </div>
                    <div class="metric-value" id="yearlyGrowth">+0%</div>
                    <div class="metric-description">Compared to last year</div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <!-- Revenue Trend Chart -->
            <div class="chart-container">
                <h3>Revenue Trend</h3>
                <div class="chart-controls">
                    <select id="revenueChartType" class="chart-select">
                        <option value="line">Line Chart</option>
                        <option value="bar">Bar Chart</option>
                        <option value="area">Area Chart</option>
                    </select>
                </div>
                <div class="chart-wrapper">
                    <canvas id="revenueTrendChart"></canvas>
                </div>
            </div>

            <!-- Payment Methods Chart -->
            <div class="chart-container">
                <h3>Payment Methods</h3>
                <div class="chart-wrapper">
                    <canvas id="paymentMethodsChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Top Performers Section -->
        <section class="top-performers-section">
            <!-- Top Products -->
            <div class="performers-container">
                <h3>Top Products</h3>
                <div class="performers-list" id="topProductsList">
                    <!-- Products will be loaded dynamically -->
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                </div>
                <div class="performers-footer">
                    <a href="/products" class="btn btn-outline">View All Products</a>
                </div>
            </div>

            <!-- Top Categories -->
            <div class="performers-container">
                <h3>Top Categories</h3>
                <div class="performers-list" id="topCategoriesList">
                    <!-- Categories will be loaded dynamically -->
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                </div>
                <div class="performers-footer">
                    <a href="/categories" class="btn btn-outline">View All Categories</a>
                </div>
            </div>
        </section>

        <!-- Business Overview -->
        <section class="business-overview-section">
            <div class="business-overview-grid">
                <!-- Inventory Status -->
                <div class="overview-card">
                    <h4>Inventory Status</h4>
                    <div class="overview-metrics">
                        <div class="metric">
                            <span class="metric-label">Total Products</span>
                            <span class="metric-value" id="totalProducts">0</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Low Stock Items</span>
                            <span class="metric-value warning" id="lowStockCount">0</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Out of Stock</span>
                            <span class="metric-value danger" id="outOfStockCount">0</span>
                        </div>
                    </div>
                </div>

                <!-- Business Metrics -->
                <div class="overview-card">
                    <h4>Business Overview</h4>
                    <div class="overview-metrics">
                        <div class="metric">
                            <span class="metric-label">Total Suppliers</span>
                            <span class="metric-value" id="totalSuppliers">0</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Inventory Value</span>
                            <span class="metric-value" id="totalInventoryValue">₫0</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Total Customers</span>
                            <span class="metric-value" id="totalCustomers">0</span>
                        </div>
                    </div>
                </div>

                <!-- Top Customers -->
                <div class="overview-card">
                    <h4>Top Customers</h4>
                    <div class="customers-list" id="topCustomersList">
                        <!-- Customers will be loaded dynamically -->
                        <div class="skeleton-item"></div>
                        <div class="skeleton-item"></div>
                    </div>
                    <div class="performers-footer">
                        <a href="/customers" class="btn btn-outline">View All Customers</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Revenue Dashboard JavaScript -->
    <script th:src="@{/modules/dashboard/js/dashboard-revenue.js}"></script>
</body>
</html>