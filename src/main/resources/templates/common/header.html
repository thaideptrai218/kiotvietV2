<!-- Dashboard Header Fragment -->
<header class="header" th:fragment="dashboardHeader">
    <div class="headerInner">
        <!-- Logo Section -->
        <a href="/dashboard" class="logoLink">
            <i class="fas fa-store" style="font-size: 24px; color: #0c63ff; margin-right: 8px;"></i>
            <span style="font-size: 20px; font-weight: 600; color: #333;">KiotViet</span>
        </a>

        <!-- Header Right Section -->
        <div class="headerRight">
            <!-- Utility Navigation -->
            <nav class="utilityNav" aria-label="Utility navigation">
                <ul class="utilityList">
                    <li>
                        <a href="#theme" class="utilityLink">
                            <i class="fas fa-palette utilityIcon"></i>
                            <span>Theme</span>
                        </a>
                    </li>
                    <li>
                        <a href="#feedback" class="utilityLink" onclick="openFeedbackModal()">
                            <i class="fas fa-comment-dots utilityIcon"></i>
                            <span>Feedback</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Global Controls -->
            <div class="globalControls" style="position: relative;">
                <!-- Notifications -->
                <button class="iconButton" aria-label="Notifications">
                    <i class="fas fa-bell"></i>
                </button>

                <!-- Settings -->
                <button class="iconButton" aria-label="Settings" onclick="openUserSettings()">
                    <i class="fas fa-cog"></i>
                </button>

                <!-- User Avatar -->
                <button class="avatarButton" aria-label="User Profile" onclick="toggleUserDropdown()">
                    <i class="fas fa-user"></i>
                </button>

                <!-- User Dropdown -->
                <div class="userDropdown" aria-hidden="true" style="display: none; position: absolute; top: 100%; right: 0; background: white; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); min-width: 280px; z-index: 1000;">
                    <div style="padding: 16px; border-bottom: 1px solid #f0f0f0;">
                        <div style="display: flex; align-items: center;">
                            <div style="width: 40px; height: 40px; border-radius: 50%; background-color: #0c63ff; color: white; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600;" id="dropdownUserName">Loading...</div>
                                <div style="color: #6b7280; font-size: 0.875rem;" id="dropdownUserEmail">Loading...</div>
                                <div style="color: #6b7280; font-size: 0.875rem;" id="dropdownUserRole">Role: Loading...</div>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 8px 0;">
                        <a href="#" style="display: flex; align-items: center; padding: 12px 16px; color: #333; text-decoration: none; transition: background-color 0.2s ease;" onclick="openUserProfile()" onmouseover="this.style.backgroundColor='#f8f9fa'" onmouseout="this.style.backgroundColor='transparent'">
                            <i class="fas fa-user-edit" style="margin-right: 8px; width: 16px;"></i>
                            Edit Profile
                        </a>
                        <a href="#" style="display: flex; align-items: center; padding: 12px 16px; color: #333; text-decoration: none; transition: background-color 0.2s ease;" onclick="openTwoFactorSettings()" onmouseover="this.style.backgroundColor='#f8f9fa'" onmouseout="this.style.backgroundColor='transparent'">
                            <i class="fas fa-shield-alt" style="margin-right: 8px; width: 16px;"></i>
                            2FA Settings
                        </a>
                        <a href="#" style="display: flex; align-items: center; padding: 12px 16px; color: #333; text-decoration: none; transition: background-color 0.2s ease;" onclick="openUserSettings()" onmouseover="this.style.backgroundColor='#f8f9fa'" onmouseout="this.style.backgroundColor='transparent'">
                            <i class="fas fa-cog" style="margin-right: 8px; width: 16px;"></i>
                            Settings
                        </a>
                        <hr style="margin: 8px 0; border: none; border-top: 1px solid #f0f0f0;">
                        <a href="#" id="logoutLink" style="display: flex; align-items: center; padding: 12px 16px; color: #dc3545; text-decoration: none; transition: background-color 0.2s ease;" onmouseover="this.style.backgroundColor='#f8d7da'" onmouseout="this.style.backgroundColor='transparent'">
                            <i class="fas fa-sign-out-alt" style="margin-right: 8px; width: 16px;"></i>
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>